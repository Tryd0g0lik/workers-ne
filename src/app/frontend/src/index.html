<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Webpack App</title>
</head>

<body>

	<h1>Hello world!</h1>
<main>
	<section class="header">
		<div>
			<h1>Новости мира кино</h1>
		</div>
		<div><span>Обновить</span></div>
	</section>
	<section class="news-feed">
		<div class="news">
			<div class="data-news">
				<div class="news-datetime">16:22</div>
				<div class="news-date">18.09.2023</div>
			</div>
			<div class="new-content">
				<div class="news-content-preview">
					<img src="./pic/bg_buggy.png" alt="" class="picturies">
				</div>
				<div>
					<p>"Газпром" обсудил с Кишиневом взаимодействие в газовой сфере</p>
				</div>
			</div>
		</div>
		<div class="news">
			<div class="data-news">
				<div class="news-datetime">10:27</div>
				<div class="news-date">17.09.2023</div>
			</div>
			<div class="new-content">
				<div class="news-content-preview">
					<img src="./pic/bg_buggy.png" alt="" class="picturies">
				</div>
				<div>
					<p>"Газпром" подает газ через Украину на ГИС "Суджа" в подтвержденном объеме</p>
				</div>
			</div>
		</div>
		<div class="news">
			<div class="data-news">
				<div class="news-datetime">12:32</div>
				<div class="news-date">16.09.2023</div>
			</div>
			<div class="new-content">

				<div class="news-content-preview">
					<img src="./pic/bg_buggy.png" alt="" class="picturies">
				</div>
				<div>
					<p>В Саратове восстановили газопровод после разгерметизации</p>
				</div>
			</div>
		</div>
	</section>
		<script>
			// async function func(registr) {
			// 	const elem = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
			// 	await elem(2000);
			// 	registr.update()
			// 		.then(() => {
			// 			registr.active.postMessage("my-second-cech");
			// 		})
			// }
			if ("serviceWorker" in navigator) {
				// Регистрация service worker-а, расположенного в корне сайта
				// за счёт использования дефолтного scope (не указывая его)
				window.addEventListener('load', async () => {
					const timer = (ms) => { new Promise((resolve) => setTimeout(resolve, ms)) }
					await timer(3000);

					console.log('SERVICEwORKER: stepped the CHECK!')
					// serviceWorker: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer
					navigator.serviceWorker
						.register("./serwiceWorker.js")
						.then((registration) => {
							console.log("Service worker зарегистрирован:", registration);

							// .update(): https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/update
							// registration.update().then(async function () {
							// 	const htmlPage = document.querySelector('html').innerHTML;
							// 	registration.active.postMessage({ page: htmlPage });
							// });

						})
						.catch((error) => {
							console.log("Ошибка при регистрации service worker-а:", error);
						});

					console.log('SERVICEwORKER: stepped the navigator!')
				})
			} else {
				// Текущий браузер не поддерживает service worker-ы.
				console.log("Текущий браузер не поддерживает service worker-ы");
			}

		</script>
</main>
</body>

</html>
